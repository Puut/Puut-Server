extends layout

block content
  form(action='/upload', class='dropzone', id='image-dropzone')
  button(id="my-button", data-clipboard-text="Copy Me!") Copy to Clipboard
  
  script.
    var clip = new ZeroClipboard($("#my-button"));
    var currentUrl = "";
    clip.on( 'dataRequested', function (client, args) {
      client.setText( currentUrl );
    });
    
    Dropzone.options.imageDropzone = {
      paramName: "image",
      uploadMultiple: false,
      acceptedFiles: "image/png",
      accept: function(file, done) {
        if(file.name.indexOf("png", this.length - "png".length) == -1)
          done("Only .png images!");
        else
          done();
      },
      
      init: function() {
        this.on("success", function(file, a) {
          console.log(a);
          currentUrl = window.location + a + ".png";
        });
      }
    }